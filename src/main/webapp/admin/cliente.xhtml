<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"  
      template="/templates/template.xhtml">
      
    <ui:define name="titulo">Clientes</ui:define>
        
    <ui:define name="conteudo">
        <p:tabView>
            <p:tab title="Cadastrar">
                <h:form>
                    <p:panelGrid>
                        <h:inputHidden value="#{clienteMBean.cliente.id}"/>
                        <p:outputLabel value="Nome:"/>
                        <br/>
                        <p:inputText value="#{clienteMBean.cliente.nome}"
                                     requiredMessage="Campo nome obrigatório"
                                     validatorMessage="Campo nome não pode passar de 200 caracteres">
                        <f:validateLength maximum="200"/>
                        </p:inputText>
                        <br/>
                        <p:outputLabel value="Email:"/>
                        <br/>
                        <p:inputTextarea value="#{clienteMBean.cliente.email}"
                                         rows="3"
                                         cols="50"
                                         counter="display"
                                         counterTemplate="Restam {0} caracteres"
                                         autoResize="false"
                                         maxlength="250"/>
                        <br/>
                        <h:outputText id="display"/>
                        <br/>
                        <p:commandButton value="SALVAR" icon="ui-icon-mail-closed" ajax= "false" action="#{clienteMBean.salvar}"/>
                    </p:panelGrid>
                </h:form>
            </p:tab>
                
            <p:tab title="Clientes">
                <h:form>
                    <p:dataTable var="cliente" value="#{clienteMBean.listaCompleta}" scrollable="true" scrollHeight="300">
                <p:column headerText="Id" footerText="Id">
                    <h:outputText value="#{cliente.id}"/>
                </p:column>
                
                <p:column headerText="Nome" footerText="Nome" sortBy="Nome">
                    <h:outputText value="#{cliente.nome}"/>
                </p:column>
                
                <p:column headerText="Descrição" footerText="Descrição">
                    <h:outputText value="#{cliente.email}"/>
                </p:column>
                
                <p:column headerText="Ação" footerText="Ação">
                    <p:commandButton icon="ui-icon-search" ajax="false" action="#{clienteMBean.selecionar(cliente)}"/>
                    <p:commandButton icon="ui-icon-trash" ajax="false" action="#{clienteMBean.deletar(cliente)}" onclick="return confirm('Excluir?')"/>
                </p:column>
                
                
                
            </p:dataTable>
                </h:form>
                </p:tab>
        </p:tabView>
    </ui:define>
</ui:composition>

